<!DOCTYPE html>
<html lang="en"> <head><link rel="shortcut icon" href="/static/images/TechMonger%28CC%29.ico"><title>How HTTP Tunnel Works in Theory - Tech Monger</title><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="description" content="In this article we will understand architecture and working of a http tunneling service provided by localtunnel."><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="canonical" href="/20/httptunnel-working/"><style>.lead{font-size:1.25rem;font-weight:300}</style></head> <body> <div class="container"> <header class="container"> <h1 class="row"><a href="/">Tech Monger</a></h1> <p class="lead row">Programming, Web Development and Computer Science.</p> </header> <span id="skiplinks" class="skip-link"> <a href="#main" title="Main Content on Page">Skip to main content</a>| <a href="#sidebar" title="Sidebar of Blog">Skip to information by topic</a> </span> <div class="row"> <main class="col-lg-10" id="main"> <article class="container" itemscope itemtype="https://schema.org/BlogPosting"> <h2 itemprop="headline">Inner Working of HTTP Tunnels - Localtunnel</h2> <p itemprop="datePublished" title="18-01-07 12:38:12Z">Posted January 07, 2018</p> <div itemprop="articleBody"> <p class="lead">Localtunnel is free and open source client and server which provides http tunneling to <a href="/22/rpi-web-app/" title="Host Web App without Static IP">expose locally hosted web application</a> (eg. home web server). It does not require you to have public or static IP and can work behind NAT or firewall. If you have ever deployed anything with localtunnel or any other http tunneling service then you would wonder how does it work. In this post we will attempt to demystify internals of localtunnel by understanding architecture.</p> <section> <h3 class="top2">Client Server Architecture</h3> <p> Localtunnel uses client server architecture where you install localtunnel client on home machine and communicate with localtunnel server to expose your web application. By default localtunnel client uses server hosted by localtunnel team on <code>localtunnel.me</code> however server code is freely available and if required you can deploy your own server and point it to your domain. </p> <h4 class="top1">How client register an application</h4> <p>If you have an web application running locally say on port 5000 then you can register application with following command and get subdomain for your application on the server.</p> <pre><code>lt -p 5000</code></pre> <p class="card-body"> <b>Related : </b> Localtunnel <a href="/13/localtunnel-ubuntu/" title="Install Localtunnel">installation</a> and <a href="/14/localtunnel-example/" title="localtunnel examples">command line reference</a>. </p> <h4 class="top1">How Server Keeps Track of an Application</h4> <p>When you register new application using your client it opens <strong>TCP connection</strong> with Localtunnel server. Server accepts your TCP request and register your application. It makes an entry for your application by assigning it one of the internal server port and provides you subdomain where application would be available over Internet. <p> <h4 class="top1">10 TCP connections and Tunnel</h4> <p>When you register application you open a single tcp connection. After registering application your local computer then opens <strong>10 different TCP Connections</strong> with localtunnel server. These 10 connections remain always active until you abort it from localtunnel client.</p> <p>If any of the connection gets dropped due to any issue (network issue, server issue) then client again opens new tcp connection to compensate for dropped connection. <strong>Bottomline</strong> is at any time you would have 10 TCP connections open with localtunnel server. Since these connections are <em>always open</em> we call it <strong>TCP tunnel</strong>. HTTP runs on the top of TCP hence we also call it <strong>HTTP Tunnel</strong>. </p> <h4>Catering HTTP Requests</h4> <p> Localtunnel server runs it's own web server (ngnix) which uses internal mapping it has created while registering your application. When request arrives for your subdomain it lands on the web server of localtunnel then localtunnel sends it to your local computer using one of the TCP connection and relay back the response to serve request. </p> </section> <figure class="text-center top5"> <img itemprop="image" class="img-fluid" src="/static/images/20/localtunnel.svg" alt="Localtunnel Architecture"> <figcaption class="figure-caption text-center">Localtunnel Client Server over TCP Tunnel </figcaption> </figure> <h4 class="top3">How does it work in Practice</h4> <div class="card"> <p class="card-body">In the next post we will take <a href="/21/localtunnel-working/" title="How localtunnel works in practice">hands on approach to analyze localtunnel</a> with simple command line utility called <code>tcpdump</code>. </p> </div> </div> <p class="top3">Tagged Under :<span itemprop="keywords"> <a href="/tag/linux/">Linux</a> <a href="/tag/localtunnel/">Localtunnel</a> <a href="/tag/open-source/">Open Source</a> <a href="/tag/web/">Web</a> </span> </p> </article> <div class="top3"> <div class="col-sm-9"> <span class="float-left"> <a class="btn btn-secondary btn-md" role="button" aria-disabled="false" href="/19/fix-heavy-workflows/" title="Fix Long Running Resource Heavy Workflows">Previous</a> </span> <span class="float-right"> <a class="btn btn-secondary btn-md" role="button" aria-disabled="false" href="/21/localtunnel-working/" title="Analyzing Working of Localtunnel with TCPDUMP">Next</a> </span> </div> </div> </main> <aside class="col-lg-2" id="sidebar"> <h3>Tags</h3> <nav> <ul> <li><a href="/tag/davmail/" title="Davmail Setup and Configuration">Davmail</a></li> <li><a href="/tag/flask/" title="Flask Web Development">Flask</a></li> <li><a href="/tag/google-cloud/" title="Google Cloud Tutorials and Examples">Google Cloud</a></li> <li><a href="/tag/informatica/" title="Informatica Administration Tutorials">Informatica</a></li> <li><a href="/tag/linux/" title="Linux Desktop and Server - Tutorials">Linux</a></li> <li><a href="/tag/localtunnel/" title="Localtunnel Tutorials -  HTTP Tunnel in Action">Localtunnel</a></li> <li><a href="/tag/matplotlib/" title="Matplotlib Examples and Tutorials">Matplotlib</a></li> <li><a href="/tag/open-source/" title="Tutorials about open source software ">Open Source</a></li> <li><a href="/tag/python/" title="Python Programming">Python</a></li> <li><a href="/tag/raspberry-pi/" title="Raspberry Pi Tutorials and Hacks">Raspberry Pi</a></li> <li><a href="/tag/thunderbird/" title="Thunderbird Tutorials">Thunderbird</a></li> <li><a href="/tag/ubuntu/" title="Ubuntu Tutorials">Ubuntu</a></li> <li><a href="/tag/web/" title="Tutorials for Full Stack Web Developers">Web</a></li> <li><a href="/tag/windows/" title="Windows Software and Tutorials">Windows</a></li> </ul> </nav> <a href="/feeds/" title="Atom Feed - Tech Monger"><i class="fa fa-rss" aria-hidden="true"></i>&nbsp;&nbsp;Feeds</a> </aside> </div> <div class="top3"></div> </div> <link rel="stylesheet" type="text/css" href="/static/css/style.css"> <script src="/static/js/scripts.js"></script> <script>hljs.initHighlightingOnLoad();</script> </body> </html>