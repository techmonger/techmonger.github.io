<!DOCTYPE html>
<html lang="en"> <head><link rel="shortcut icon" href="/static/images/TechMonger%28CC%29.ico"><title>Public Key - SSH Google Cloud VM from Linux - Tech Monger</title><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="description" content="In this tutorial we will learn how to connect to google cloud's compute instance vm from ubuntu linux by configuring ssh connectivity using public key."><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="canonical" href="/"><style>.lead{font-size:1.25rem;font-weight:300}</style></head> <body> <div class="container"> <header class="container"> <h1 class="row"><a href="/">Tech Monger</a></h1> <p class="lead row">Programming, Web Development and Computer Science.</p> </header> <span id="skiplinks" class="skip-link"> <a href="#main" title="Main Content on Page">Skip to main content</a>| <a href="#sidebar" title="Sidebar of Blog">Skip to information by topic</a> </span> <div class="row"> <main class="col-lg-10" id="main"> <article class="container" itemscope itemtype="https://schema.org/BlogPosting"> <h2><a href="/43/ssh-google-vm/">SSH Into Compute Engine via Public Key from Linux</a></h2> <p itemprop="datePublished" title="18-08-11 18:38:13Z">Posted August 11, 2018</p> <div itemprop="articleBody"> <p class="lead"> If you have spun Linux compute engine instance on google cloud and want to connect it from some other linux machine then you can do it by configuring your public key with google cloud vm. In this article we will learn how to setup public key based ssh connection with your google compute instance and connect it using remote ubuntu machine. </p> <h3 class="top1">Steps to configure Public Key with Google Cloud VM</h3> <ol class="top2"> <h5><li> Generate Key Pair at Local Ubuntu Machine Using <code>ssh-keygen</code> </h5> <pre class="bash"><code>techmonger@ubuntu:~$ cd ~/.ssh/

techmonger@ubuntu:~/.ssh$ ssh-keygen 


Generating public/private rsa key pair.
Enter file to save the key (/home/techmonger/.ssh/id_rsa): id_rsa_google
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in id_rsa_google.
Your public key has been saved in id_rsa_google.pub.
</code></pre> <p>Above will generate private and public keys inside files <code>id_rsa_google</code> and <code>id_rsa_google.pub</code> respectively. <b>Note</b> that we have not provided any input for pass phrase.</p> </li> <h5><li>Navigate to Compute Engine</h5> <p>Open google cloud console and from left bar select compute engine. Select instance for which you want to create ssh connection. </p> <figure class="text-center"> <img class="img-fluid" src="/static/images/43/compute-engine-vm-instance-details.png" alt="Edit Google Compute Engine Instance"> <figcaption class="text-center">F1 Micro VM Instance Google Cloud Console</figcaption> </figure> </li> <h5 id="vm-level"><li>Edit Instance and Add Public Key in SSH Box</h5> <p>Copy paste the content of generated public key file <code>id_rsa_google.pub</code> in the box below SSH Keys. </p> <figure class="text-center"> <img class="img-fluid" src="/static/images/43/ssh-public-key-setup-google-cloud-vm-instance.png" alt="Configure Public Key Google Cloud VM"> <figcaption class="text-center">SSH Key Configuration F1 Micro</figcaption> </figure> <p>Scroll down and save once Key has been added.</p></p> </li> <h5><li>Get the external IP address of VM</h5> <p>Scroll up in VM details section and from <b>Network interfaces</b> section check the <b>External IP</b> of the vm. In this example external ip is <code>93.184.216.34</code></p> <h5><li>Test SSH Connection from Ubuntu Machine</h5> <pre class="bash"><code>techmonger@ubuntu:~$ ssh 93.184.216.34

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
Last login: Sun Aug 12 10:34:49 2018 from (ip-address)

techmonger@google-vm:~$ 
</code></pre> </li> </ol> <h3 class="top3">How this SSH connection Works</h3> <ul> <li class="top2">When you add your public key in ssh box (step 3) it creates file <code>authorized_keys</code> inside home directory of vm user under <code>.ssh</code> and put the content of file inside it.</li> <li class="top2">When you connect via your ubuntu machine having above public key inside <code>.ssh</code> folder, it establishes ssh connectivity with that public key.</li> <li class="top2">Since that public key is now authorized, vm instance allows you to login. </li> </ul> <h3 id="project-level" class="top3">Project Level Configuration</h3> <p>To login inside any VM instance of your project on google cloud you can configure public key at global level.</p> <p>Select Compute Instance from sidebar and click on any VM instance in your project. Select Metadata from the sidebar and move to SSH keys tab to add project level public ssh key.</p> <figure class="text-center"> <img class="img-fluid" src="/static/images/43/project-level-ssh-public-key.png" alt="Google VM Login Global Level"> <figcaption class="text-center">Setup Project Level SSH Authentication for Google Cloud VMs</figcaption> </figure> <h4>Conclusion</h4> <div class="card"> <p class="card-body"> Google cloud console provides shell access to vm from browsers. But if you want to login from your local machine you can configure public key and directly ssh into your google vm and gain full shell access including root access. You can either setup public key login for <a href="#vm-level" title="Google Cloud VM Level SSH Keys">specific vm</a> or can configure <a href="#project-level" title="Google Cloud Project Level SSH Keys">project level login</a>. </p> </div> </div> <p class="top3">Tagged Under :<span itemprop="keywords"> <a href="/tag/google-cloud/">Google Cloud</a> <a href="/tag/linux/">Linux</a> <a href="/tag/ubuntu/">Ubuntu</a> </span> </p> </article> <div class="top3"> <div class="col-sm-9"> <span class="float-left"> <a class="btn btn-secondary btn-md" role="button" aria-disabled="false" href="/42/flask-basic-auth/" title="Flask Basic User Login without Database">Previous</a> </span> <span class="float-right"> <a class="btn btn-secondary btn-md disabled" role="button" aria-disabled="true" href="#">Next</a> </span> </div> </div> </main> <aside class="col-lg-2" id="sidebar"> <h3>Tags</h3> <nav> <ul> <li><a href="/tag/davmail/" title="Davmail Setup and Configuration">Davmail</a></li> <li><a href="/tag/flask/" title="Flask Web Development">Flask</a></li> <li><a href="/tag/google-cloud/" title="Google Cloud Tutorials and Examples">Google Cloud</a></li> <li><a href="/tag/informatica/" title="Informatica Administration Tutorials">Informatica</a></li> <li><a href="/tag/linux/" title="Linux Desktop and Server - Tutorials">Linux</a></li> <li><a href="/tag/localtunnel/" title="Localtunnel Tutorials -  HTTP Tunnel in Action">Localtunnel</a></li> <li><a href="/tag/matplotlib/" title="Matplotlib Examples and Tutorials">Matplotlib</a></li> <li><a href="/tag/open-source/" title="Tutorials about open source software ">Open Source</a></li> <li><a href="/tag/python/" title="Python Programming">Python</a></li> <li><a href="/tag/raspberry-pi/" title="Raspberry Pi Tutorials and Hacks">Raspberry Pi</a></li> <li><a href="/tag/thunderbird/" title="Thunderbird Tutorials">Thunderbird</a></li> <li><a href="/tag/ubuntu/" title="Ubuntu Tutorials">Ubuntu</a></li> <li><a href="/tag/web/" title="Tutorials for Full Stack Web Developers">Web</a></li> <li><a href="/tag/windows/" title="Windows Software and Tutorials">Windows</a></li> </ul> </nav> <a href="/feeds/" title="Atom Feed - Tech Monger"><i class="fa fa-rss" aria-hidden="true"></i>&nbsp;&nbsp;Feeds</a> </aside> </div> <div class="top3"></div> </div> <link rel="stylesheet" type="text/css" href="/static/css/style.css"> <script src="/static/js/scripts.js"></script> <script>hljs.initHighlightingOnLoad();</script> </body> </html>