<!DOCTYPE html>
<html lang="en"> <head><link rel="shortcut icon" href="/static/images/TechMonger%28CC%29.ico"><title>Email Functionality in Flask without Mail Server - Tech Monger</title><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="description" content="Integrate mailgun api with python and flask to send mails from your app without hosting own mail server."><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="canonical" href="/26/flask-mailgun/"><style>.lead{font-size:1.25rem;font-weight:300}</style></head> <body> <div class="container"> <header class="container"> <h1 class="row"><a href="/">Tech Monger</a></h1> <p class="lead row">Programming, Web Development and Computer Science.</p> </header> <span id="skiplinks" class="skip-link"> <a href="#main" title="Main Content on Page">Skip to main content</a>| <a href="#sidebar" title="Sidebar of Blog">Skip to information by topic</a> </span> <div class="row"> <main class="col-lg-9" id="main"> <article class="container" itemscope itemtype="https://schema.org/BlogPosting"> <a href="/26/flask-mailgun/"> <h2 itemprop="headline">Send Email with Flask Application using Mailgun </h2> </a> <p itemprop="datePublished" title="18-02-04 14:57:04Z">Posted February 04, 2018</p> <div itemprop="articleBody"> <p class="lead"> Often web application needs to implement mail features for user verification, notification or to implement as trivial functionality as contact form. If your web host does not provide mail server then you can use external solution like <code>mailgun</code> which provides push email functionality along with other useful features using <code>Rest API</code>. It also provides <mark>free 10, 000 emails per month</mark> before charging you for the service. Learn how you can implement this with python and flask. Previously we have built <a href="/5/python-flask-recaptcha/" title="Python Basic Contact Form with ReCaptcha">contact form with flask and ReCaptcha</a>. We will further develop contact form in this tutorial by adding email support. </p> <h3>Background</h3> <p> Our contact form is very simple to build and collect user name, email and message. It also validates submission using Google ReCaptcha API. </p> <figure class="figure"> <img src="/static/images/5/flask-recaptcha-contact-form.png" alt="Flask ReCaptcha Contact Form "> <figcaption class="text-center">Contact Form in Python Flask</figcaption> </figure> <h3>Configuring API endpoint and API Key</h3> <p>When you sign up in mailgun and add your domain you get <b>API Endpoint URL</b> where you send post requests and <b>API Secret Key</b> to authorize API calls made by you. You can either configure these variables in application configuration settings or configure in specific function which is making API calls. </p> <p>API key and Token from mailgun would look something like below.</p> <pre><code>apikey = "key-abc123456pqr456xYz"
url = "https://api.mailgun.net/vN/domainAbcdefg.mailgun.org"
</code></pre> <h3 class="top3">Send Mail API call with <code>Requests</code></h3> <p>To make <code>HTTPS</code> post request at url endpoint we would use python <code>requests</code> library. You can install it with <code>pip</code> <pre><code>pip install requests</code></pre> </p> <h4>Sending Mail</h4> <p>We assume that you have already collected details from user form submission. Beow code will deliver those details via HTTP Post request which will result delivery of mail. Note that every collected detail should be of type <code>string</code>. </p> <pre><code>import requests

apikey = "key-abc123456pqr456xYz"
url = "https://api.mailgun.net/vN/domainAbcdefg.mailgun.org"

requests.post(url, 
    auth=("api", apikey), 
    data={"from": collected_email,
    "to": ["you@example.com", "somebody-else@example.com"], 
    "subject": "New Contact Entry", 
    "text":collected_message}
)
</code></pre> <p class="top2">Alternatively you can send html email by replacing <code>text</code> with <code>html</code> in data payload. </p> <pre><code>
requests.post(url, 
    auth=("api", apikey), 
    data={"from": collected_email,
    "to": ["you@example.com", "somebody-else@example.com"], 
    "subject": "New Contact Entry", 
    "html":html_message}
)
</code></pre> <p class="card-body"> <strong>Note</strong> that if you are sending HTML Mail then first <strong>escape message</strong> collected by user to avoid potential security breach. </p> </div> <p class="top3">Tagged Under :<span itemprop="keywords"> <a href="/tag/flask/">Flask</a> <a href="/tag/python/">Python</a> <a href="/tag/web/">Web</a> </span> </p> </article> <div class="top3"> <div class="col-sm-9"> <span class="float-left"> <a class="btn btn-secondary btn-md" role="button" aria-disabled="false" href="/25/flask-atom-feed/" title="Atom RSS Feed Generator with Python and Flask">Previous</a> </span> <span class="float-right"> <a class="btn btn-secondary btn-md" role="button" aria-disabled="false" href="/27/connection-details-repository/" title="Informatica Connection Details from Repository Database">Next</a> </span> </div> </div> </main> <aside class="col-lg-3 top5" id="sidebar"> <div class="text-right"> <h3>Tags</h3> <nav> <ul> <li class="list-unstyled"><a href="/tag/davmail/" title="Davmail Setup and Configuration">Davmail</a></li> <li class="list-unstyled"><a href="/tag/flask/" title="Flask Web Development">Flask</a></li> <li class="list-unstyled"><a href="/tag/google-cloud/" title="Google Cloud Tutorials and Examples">Google Cloud</a></li> <li class="list-unstyled"><a href="/tag/informatica/" title="Informatica Administration Tutorials">Informatica</a></li> <li class="list-unstyled"><a href="/tag/linux/" title="Linux Desktop and Server - Tutorials">Linux</a></li> <li class="list-unstyled"><a href="/tag/localtunnel/" title="Localtunnel Tutorials -  HTTP Tunnel in Action">Localtunnel</a></li> <li class="list-unstyled"><a href="/tag/open-source/" title="Tutorials about open source software ">Open Source</a></li> <li class="list-unstyled"><a href="/tag/python/" title="Python Programming">Python</a></li> <li class="list-unstyled"><a href="/tag/raspberry-pi/" title="Raspberry Pi Tutorials and Hacks">Raspberry Pi</a></li> <li class="list-unstyled"><a href="/tag/thunderbird/" title="Thunderbird Tutorials">Thunderbird</a></li> <li class="list-unstyled"><a href="/tag/ubuntu/" title="Ubuntu Tutorials">Ubuntu</a></li> <li class="list-unstyled"><a href="/tag/web/" title="Tutorials for Full Stack Web Developers">Web</a></li> <li class="list-unstyled"><a href="/tag/windows/" title="Windows Software and Tutorials">Windows</a></li> <li class="list-unstyled"><a href="/tag/wordpress/" title="Wordpress Tutorials and Guides">Wordpress</a></li> </ul> </nav> </div> <div class="top2 float-left"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-1476292113673713" data-ad-slot="8720400182"></ins> <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script> <div> <div class="text-center"> <a class="top3" href="/feeds/" title="Atom Feed - Tech Monger"><i class="fa fa-rss" aria-hidden="true"></i>&nbsp;&nbsp;Feeds</a> </div> </aside> </div> <hr class="top3"> <footer class="top5 text-secondary"> <div class="container-fluid text-center text-md-left"> <div class="row"> <div class="col-md-6 mt-md-0 mt-3"> <h5 class="text-uppercase">About</h5> <p>Techmonger is a web log which shares interesting articles about computer science, programming and web development.</p> </div> <hr class="clearfix w-100 d-md-none pb-3"> <div class="col-md-3 mb-md-0 mb-3"> <h5 class="text-uppercase">Pages</h5> <ul class="list-unstyled"> <li> <a href="/privacy.html">Privacy Policy</a> </li> <li> <a href="/contact.html">Contact</a> </li> </ul> </div> <div class="col-md-3 mb-md-0 mb-3"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:468px;height:60px" data-ad-client="ca-pub-1476292113673713" data-ad-slot="1929762560"></ins> <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
            </script> </div> </div> </div> </footer> <div class="top3"></div> <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css"> <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script> <script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#ffffff"
    },
    "button": {
      "background": "#e0e0e0",
      "text": "#0a0202"
    }
  },
  "theme": "edgeless",
  "content": {
    "dismiss": "Accept",
    "href": "/privacy.html"
  }
})});
</script> </div> <link rel="stylesheet" type="text/css" href="/static/css/style.css"> <script src="/static/js/scripts.js"></script> <script>hljs.initHighlightingOnLoad();</script> </body> </html>